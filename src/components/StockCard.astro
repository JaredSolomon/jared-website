---
interface Props {
    symbol: string;
    price: number;
    change: number;
    changePercent: number;
    name?: string;
}

const { symbol, price, change, changePercent, name } = Astro.props;

const isPositive = change >= 0;
const colorClass = isPositive ? "text-green-400" : "text-red-400";
const bgClass = isPositive
    ? "bg-green-500/10 border-green-500/20"
    : "bg-red-500/10 border-red-500/20";
const arrow = isPositive ? "↑" : "↓";
---

<div
    class={`group relative p-6 rounded-2xl backdrop-blur-xl border transition-all duration-300 hover:-translate-y-1 ${bgClass} border-white/10 hover:border-white/20`}
>
    <div class="flex justify-between items-start mb-4">
        <div>
            <h3 class="text-2xl font-bold text-white tracking-tight">
                {symbol}
            </h3>
            {
                name && (
                    <p class="text-sm text-gray-400 truncate max-w-[150px]">
                        {name}
                    </p>
                )
            }
        </div>
        <div
            class={`flex items-center space-x-1 ${colorClass} font-mono font-medium`}
        >
            <span>{arrow}</span>
            <span>{Math.abs(changePercent).toFixed(2)}%</span>
        </div>
    </div>

    <div class="flex items-end justify-between">
        <span class="text-3xl font-bold text-white">
            ${
                price.toLocaleString(undefined, {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2,
                })
            }
        </span>
        <span class={`text-sm ${colorClass}`}>
            {isPositive ? "+" : ""}{change.toFixed(2)}
        </span>
    </div>
</div>
